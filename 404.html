<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¡µé¢é‡å®šå‘ä¸­...</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
        }
        .loading {
            animation: spin 1s linear infinite;
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .container {
            max-width: 400px;
            padding: 2rem;
        }
        h2 {
            margin: 0 0 1rem 0;
            font-size: 1.5rem;
        }
        p {
            margin: 0;
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="loading">ğŸ”„</div>
        <h2>é¡µé¢é‡å®šå‘ä¸­...</h2>
        <p>æ­£åœ¨ä¸ºæ‚¨è·³è½¬åˆ°æ­£ç¡®çš„é¡µé¢</p>
    </div>
    
    <script>
        // GitHub Pages SPAè·¯ç”±é‡å®šå‘è„šæœ¬
        (function() {
            console.log('GitHub Pages 404é‡å®šå‘å¯åŠ¨');
            
            // è·å–å½“å‰è·¯å¾„ä¿¡æ¯
            const currentPath = window.location.pathname;
            const search = window.location.search;
            const hash = window.location.hash;
            
            console.log('å½“å‰è·¯å¾„:', currentPath);
            console.log('æŸ¥è¯¢å‚æ•°:', search);
            console.log('å“ˆå¸Œ:', hash);
            
            // æ£€æµ‹æ˜¯å¦ä¸ºGitHub Pageså­è·¯å¾„éƒ¨ç½²
            const pathSegments = currentPath.split('/').filter(segment => segment !== '');
            let basePath = '/';
            let routePath = '';
            
            // å¦‚æœæ˜¯å­è·¯å¾„éƒ¨ç½²ï¼ˆå¦‚ /username.github.io/repo-name/blogï¼‰
            if (pathSegments.length > 0) {
                // æ£€æŸ¥æ˜¯å¦ä¸ºGitHub Pagesä»“åº“è·¯å¾„æ ¼å¼
                if (pathSegments[0].includes('.github.io') || pathSegments.length > 1) {
                    // å‡è®¾ç¬¬ä¸€ä¸ªæ®µæ˜¯ä»“åº“åï¼Œåé¢çš„æ˜¯è·¯ç”±
                    if (pathSegments.length > 1) {
                        basePath = '/' + pathSegments[0] + '/';
                        routePath = pathSegments.slice(1).join('/');
                    } else {
                        routePath = pathSegments[0];
                    }
                } else {
                    // ç›´æ¥åŸŸåéƒ¨ç½²
                    routePath = pathSegments.join('/');
                }
            }
            
            // å¦‚æœæ²¡æœ‰è·¯ç”±è·¯å¾„ï¼Œé»˜è®¤ä¸ºhome
            if (!routePath) {
                routePath = 'home';
            }
            
            console.log('åŸºç¡€è·¯å¾„:', basePath);
            console.log('è·¯ç”±è·¯å¾„:', routePath);
            
            // æ„å»ºé‡å®šå‘URL
            const redirectUrl = basePath + '?spa_redirect=' + encodeURIComponent(routePath) + 
                               (search ? '&' + search.slice(1) : '') + hash;
            
            console.log('é‡å®šå‘åˆ°:', redirectUrl);
            
            // æ˜¾ç¤ºé‡å®šå‘ä¿¡æ¯ï¼ˆè°ƒè¯•ç”¨ï¼‰
            if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                console.log('æœ¬åœ°å¼€å‘ç¯å¢ƒï¼Œå»¶è¿Ÿé‡å®šå‘ä»¥ä¾¿æŸ¥çœ‹æ—¥å¿—');
                setTimeout(() => {
                    window.location.replace(redirectUrl);
                }, 1000);
            } else {
                // ç”Ÿäº§ç¯å¢ƒç«‹å³é‡å®šå‘
                window.location.replace(redirectUrl);
            }
            
        })();
    </script>
</body>
</html>