<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="src/assets/icons/favicon.jpg" type="image/png" />
    <title>个人博客 - 首页</title>
    <link rel="stylesheet" href="src/styles/style.css" />
  </head>
  <body>
    <!-- WebGL 背景画布 -->
    <canvas id="webgl-background" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2;"></canvas>
    <div class="parallax-background" id="parallax1"></div>
    
    <!-- 导航栏 -->
    <nav class="navbar">
      <div class="nav-container">
        <div class="nav-logo">
          <h2>我的博客</h2>
        </div>
        <ul class="nav-menu">
          <li class="nav-item">
            <a href="index.html" class="nav-link active">首页</a>
          </li>
          <li class="nav-item">
            <a href="public/blog.html" class="nav-link">博客</a>
          </li>
          <li class="nav-item">
            <a href="public/portfolio.html" class="nav-link">项目经历</a>
          </li>
        </ul>
      </div>
    </nav>

    <!-- 主要内容区域 -->
    <main class="main-content">
      <div class="content">
        <h1 id="greeting">欢迎来到我的个人博客</h1>
        <p class="intro">这里记录着我的技术分享、生活感悟和创作作品</p>
        <div class="home-cards">
          <div class="card" onclick="window.location.href='public/blog.html'">
            <h3>最新博客</h3>
            <p>分享最新的技术心得和学习笔记</p>
            <div class="card-icon">📝</div>
          </div>
          <div class="card" onclick="window.location.href='public/portfolio.html'">
            <h3>项目经历</h3>
            <p>展示我的项目和创作成果</p>
            <div class="card-icon">💼</div>
          </div>
          <div class="card">
            <h3>关于我</h3>
            <p>了解更多关于我的信息</p>
            <div class="card-icon">👨‍💻</div>
          </div>
        </div>
        
        <!-- 最新文章预览 -->
        <section class="latest-posts">
          <h2>最新文章</h2>
          <div class="posts-preview">
            <article class="post-preview">
              <h3><a href="blog.html?id=1">我的第一篇博客</a></h3>
              <p class="post-date">2024-01-15</p>
              <p class="post-excerpt">这是我博客的第一篇文章，记录了我开始写博客的初衷和想法...</p>
            </article>
            <article class="post-preview">
              <h3><a href="blog.html?id=2">技术学习心得</a></h3>
              <p class="post-date">2024-01-10</p>
              <p class="post-excerpt">分享我在学习新技术过程中的一些心得体会和踩坑经验...</p>
            </article>
          </div>
          <div class="view-all">
            <a href="blog.html" class="btn-primary">查看所有文章</a>
          </div>
        </section>
      </div>
    </main>

    <!-- 渲染引擎脚本 -->
    <script src="src/engine/Engine.js"></script>
    <script src="src/scripts/background-renderer.js"></script>
    
    <!-- JavaScript 脚本 -->
    <script src="src/scripts/parallax.js"></script>
    <script src="src/scripts/common.js"></script>
    
    <!-- 调试脚本 -->
    <script src="debug-background.js"></script>
    <script>
        // 立即启动背景渲染器
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 DOM加载完成，立即启动背景渲染器');
            
            // 等待一小段时间确保脚本加载完成
            setTimeout(() => {
                if (window.backgroundRenderer) {
                    if (!window.backgroundRenderer.isInitialized) {
                        console.log('🔄 手动启动背景渲染器');
                        window.backgroundRenderer.init();
                    }
                } else {
                    console.error('❌ 背景渲染器未找到');
                }
            }, 100);
        });
        
        // 检查WebGL背景状态
        setTimeout(() => {
            console.log('=== WebGL背景状态检查 ===');
            console.log('Canvas元素:', document.getElementById('webgl-background'));
            console.log('背景渲染器:', window.backgroundRenderer);
            if (window.backgroundRenderer) {
                console.log('初始化状态:', window.backgroundRenderer.isInitialized);
                console.log('WebGL上下文:', window.backgroundRenderer.gl);
                console.log('着色器程序:', window.backgroundRenderer.program);
                console.log('动画ID:', window.backgroundRenderer.animationId);
                
                // 如果还没有启动，强制启动
                if (!window.backgroundRenderer.isInitialized) {
                    console.log('🔥 强制启动背景渲染器');
                    window.backgroundRenderer.init();
                }
            }
        }, 2000);
    </script>
  </body>
</html>
